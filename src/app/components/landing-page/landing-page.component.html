<div class="auth-wrapper container-fluid min-vh-100 d-flex flex-column">
 
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg rounded-4 shadow-sm my-3 px-3">
    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"
         class="bi bi-bank me-2" viewBox="0 0 16 16" fill="white">
      <path d="M8 .95l6.364 3.182v1.09H1.636v-1.09L8 .95zm0 1.09L2.636 5.223h10.728L8 2.04zM1 6h14v1H1V6zm1 2h1v6H2V8zm2 0h1v6H4V8zm2 0h1v6H6V8zm2 0h1v6H8V8zm2 0h1v6h-1V8zm2 0h1v6h-1V8z"/>
    </svg>
    <span class="fw-bold" id="logo-text" style="color:white;">MyBank</span>
 
    <div class="ms-auto d-flex gap-3">
      <button class="btn btn-primary" (click)="toggleForm('signin')">Sign In</button>
      <button class="secondary" (click)="toggleForm('register')">Register</button>
    </div>
  </nav>
 
  <!-- Main Split -->
  <div class="container my-3 my-md-4 flex-grow-1 d-flex align-items-center">
    <div class="rounded-4 shadow-lg overflow-hidden w-100">
      <div class="row g-0">
 
        <!-- LEFT: Image with overlay text -->
        <div class="col-12 col-lg-6 auth-layout" id="left-part">
          <div class="hero-panel">
            <img src="../../assets/bg.png" alt="img" id="left-img">
            <div class="hero-overlay"></div>
            <div class="hero-content">
              <h1 class="display-5 fw-bold mb-2">Banking Made Easier</h1>
              <p class="lead" id="para">
                A secure and efficient internal customer account management system for branches,
                managers, and officersâ€”simplifying your banking operations.
              </p>
            </div>
          </div>
        </div>
 
        <!-- RIGHT: Auth Forms -->
        <div class="col-12 col-lg-6 d-flex">
          <div class="auth-panel mx-auto w-100">
 
            <div class="title">
              <h1>Welcome</h1>
            </div>
 
            <!-- Sign In Form -->
            <form *ngIf="showForm !== 'register'" [formGroup]="signinForm" (ngSubmit)="signin()" novalidate>
              <div class="mb-3">
                <label class="form-label">User ID</label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  formControlName="userId"
                  placeholder="Enter your user ID"
                  inputmode="text"
                  autocomplete="username"
                />
              </div>
 
              <!-- CHANGED: Email -> Password -->
              <div class="mb-3">
                <label class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control form-control-lg"
                  formControlName="password"
                  placeholder="Enter your password"
                  autocomplete="current-password"
                />
              </div>
 
              <button type="submit" class="btn btn-primary btn-lg w-100" [disabled]="signinForm.invalid">Login</button>
            </form>
 
            <!-- Register Form -->
            <form *ngIf="showForm === 'register'" [formGroup]="signupForm" (ngSubmit)="signup()" novalidate>
              <div class="mb-3">
                <label class="form-label">Name</label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  formControlName="name"
                  placeholder="Your name"
                />
              </div>
 
              <div class="mb-3">
                <label class="form-label">User ID</label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  formControlName="userId"
                  placeholder="Choose a user ID"
                  autocomplete="username"
                />
              </div>
 
              <div class="mb-3">
                <label class="form-label">Email</label>
                <input
                  type="email"
                  class="form-control form-control-lg"
                  formControlName="email"
                  placeholder="Your email"
                  autocomplete="email"
                />
              </div>
 
              <div class="mb-3">
                <label class="form-label">Branch</label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  formControlName="branch"
                  placeholder="Branch name or code"
                />
              </div>
 
              <div class="mb-3">
                <label class="form-label">Role</label>
                <select class="form-select form-select-lg" formControlName="role">
                  <option value="" disabled>Select Role</option>
                  <option value="admin">Admin</option>
                  <option value="bankManager">Bank Manager</option>
                  <option value="bankOfficer">Bank Officer</option>
                </select>
              </div>
 
              <!-- NEW: Password fields -->
              <div class="mb-3">
                <label class="form-label">Password</label>
                <input
                  type="password"
                  class="form-control form-control-lg"
                  formControlName="password"
                  placeholder="Create a password"
                  autocomplete="new-password"
                />
                <small class="text-muted">Min 8 chars, include letters &amp; numbers.</small>
 
                <!-- Optional control errors -->
                <div class="text-danger mt-1" *ngIf="signupForm.get('password')?.touched && signupForm.get('password')?.errors">
                  <div *ngIf="signupForm.get('password')?.errors?.['required']">Password is required.</div>
                  <div *ngIf="signupForm.get('password')?.errors?.['minlength']">Minimum 8 characters.</div>
                  <div *ngIf="signupForm.get('password')?.errors?.['pattern']">Include letters and numbers.</div>
                </div>
              </div>
 
              <div class="mb-3">
                <label class="form-label">Confirm Password</label>
                <input
                    type="password"
                    class="form-control form-control-lg"
                    formControlName="confirmPassword"
                    placeholder="Confirm your password"
                    autocomplete="new-password"
                />
                <!-- Strict-template safe mismatch error -->
                <div class="text-danger mt-1"
                     *ngIf="
                       signupForm.hasError('passwordMismatch') &&
                       (signupForm.get('confirmPassword')?.touched || signupForm.get('password')?.touched)
                     ">
                  Passwords do not match.
                </div>
              </div>
 
              <button type="submit" class="btn btn-primary btn-lg w-100" [disabled]="signupForm.invalid">Register</button>
            </form>
 
          </div>
        </div>
 
      </div>
    </div>
  </div>
</div>
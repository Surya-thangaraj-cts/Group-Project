<div class="auth-wrapper min-vh-100 d-flex flex-column">

  <!-- Navbar (edge-to-edge, custom) -->
  <nav class="app-navbar">
    <div class="brand">
      <a routerLink="/home" class="d-flex align-items-center text-decoration-none">
        <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40"
             class="bi bi-bank me-2" viewBox="0 0 16 16" fill="white" aria-hidden="true">
          <path d="M8 .95l6.364 3.182v1.09H1.636v-1.09L8 .95zm0 1.09L2.636 5.223h10.728L8 2.04zM1 6h14v1H1V6zm1 2h1v6H2V8zm2 0h1v6H4V8zm2 0h1v6H6V8zm2 0h1v6H8V8zm2 0h1v6h-1V8zm2 0h1v6h-1V8z"></path>
        </svg>
        <span class="fw-bold logo-text ms-1">MyBank</span>
      </a>
    </div>

    <div class="nav-actions d-flex align-items-center gap-3">
      <a routerLink="/" class="btn btn-light">‚Üê Back Home</a>
    </div>
  </nav>

  <!-- Main Container -->
  <div class="container my-3 my-md-4 flex-grow-1 d-flex align-items-center">
    <div class="rounded-4 shadow-lg overflow-hidden w-100">
      <div class="row g-0">

        <!-- LEFT: Image -->
        <div class="col-12 col-lg-6 auth-layout">
          <div class="hero-panel">
            <img src="../../assets/bg.png" alt="Banking" class="left-img" />
            <div class="hero-overlay"></div>
            <div class="hero-content">
              <h1 class="display-5 fw-bold mb-2">Welcome Back</h1>
              <p class="lead">Access your banking dashboard securely</p>
            </div>
          </div>
        </div>

        <!-- RIGHT: Form -->
        <div class="col-12 col-lg-6 d-flex">
          <div class="auth-panel mx-auto w-100">
            <div class="title">
              <h1>Sign In</h1>
              <p class="text-muted">Enter your credentials to continue</p>
            </div>

            <!-- Alert Message -->
            <div
              *ngIf="showMessage && message"
              [ngClass]="{
                'alert alert-success': messageType === 'success',
                'alert alert-danger': messageType === 'error',
                'alert alert-warning': messageType === 'warning'
              }"
              role="alert"
              class="mb-3">
              <div class="d-flex justify-content-between align-items-center">
                <span>{{ message }}</span>
                <button type="button" class="btn-close" (click)="clearMessage()" aria-label="Close"></button>
              </div>
            </div>

            <!-- Sign In Form -->
            <form [formGroup]="signinForm" (ngSubmit)="signin()" novalidate autocomplete="off">
              <!-- Hidden dummy fields to discourage browser autofill -->
              <!-- <input type="text" name="fake-username" autocomplete="username" style="position:absolute; left:-9999px; top:auto; width:1px; height:1px; opacity:0;" /> -->
              <!-- <input type="password" name="fake-password" autocomplete="current-password" style="position:absolute; left:-9999px; top:auto; width:1px; height:1px; opacity:0;" /> -->
              <div class="mb-3">
                <label class="form-label">User ID</label>
                <input
                  type="text"
                  class="form-control form-control-lg"
                  formControlName="userId"
                  placeholder="Enter your user ID"
                  inputmode="text"
                  autocomplete="off"
                />
              </div>

              <div class="mb-3">
                <label class="form-label">Password</label>
                <div class="password-input-group">
                  <input
                    [type]="showPassword ? 'text' : 'password'"
                    class="form-control form-control-lg"
                    formControlName="password"
                    placeholder="Enter your password"
                    autocomplete="new-password"
                  />
                  <button
                    type="button"
                    class="password-toggle-btn"
                    (click)="togglePassword()"
                    aria-label="Toggle password visibility">
                    <svg *ngIf="!showPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                         viewBox="0 0 16 16">
                      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393Z"/>
                    </svg>
                    <svg *ngIf="showPassword" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                         viewBox="0 0 16 16">
                      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393Z"/>
                    </svg>
                  </button>
                </div>
              </div>

              <button type="submit" class="btn btn-primary btn-lg w-100" [disabled]="signinForm.invalid">
                Sign In
              </button>

              <p class="text-center mt-3 text-muted">
                Don't have an account?
                <a routerLink="/register" class="link-primary fw-bold">Register here</a>
              </p>
            </form>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
<div class="reports-container">
  <!-- Header Section -->
  <div class="reports-header">
    <h1 class="reports-title">Reports & Analytics</h1>
    <p class="reports-subtitle">Generate and analyze comprehensive transaction reports with advanced filtering options</p>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="alert alert-danger">
    {{ errorMessage }}
  </div>

  <!-- Filters Section -->
  <div class="filters-section">
    <h3 class="section-title">Generate Report</h3>
    
    <div class="filters-grid">
      <!-- Date Range Column -->
      <div class="filter-column">
        <label class="filter-label">From Date</label>
        <input type="date" class="form-control" [(ngModel)]="filterCriteria.fromDate" (change)="generateReport()">

        <label class="filter-label">To Date</label>
        <input type="date" class="form-control" [(ngModel)]="filterCriteria.toDate" (change)="generateReport()">

        <label class="filter-label">Month</label>
        <input type="month" class="form-control" [(ngModel)]="filterCriteria.month" (change)="generateReport()">
      </div>

      <!-- Amount & Location Column -->
      <div class="filter-column">
        <label class="filter-label">Branch</label>
        <select class="form-control" [(ngModel)]="filterCriteria.branch" (change)="generateReport()">
          <option value="">Select Branch</option>
          <option *ngFor="let branch of branches" [value]="branch">{{ branch }}</option>
        </select>

        <label class="filter-label">Min Amount</label>
        <input type="number" class="form-control" [(ngModel)]="filterCriteria.minAmount" (change)="generateReport()" placeholder="0">

        <label class="filter-label">Max Amount</label>
        <input type="number" class="form-control" [(ngModel)]="filterCriteria.maxAmount" (change)="generateReport()" placeholder="999999">
      </div>

      <!-- Transaction Details Column -->
      <div class="filter-column">
        <label class="filter-label">Account Type</label>
        <select class="form-control" [(ngModel)]="filterCriteria.accountType" (change)="generateReport()">
          <option value="">Select Account Type</option>
          <option *ngFor="let type of accountTypes" [value]="type">{{ type }}</option>
        </select>

        <label class="filter-label">Transaction Type</label>
        <select class="form-control" [(ngModel)]="filterCriteria.transactionType" (change)="generateReport()">
          <option value="">Select Transaction Type</option>
          <option *ngFor="let type of transactionTypes" [value]="type">{{ type }}</option>
        </select>

        <label class="filter-label">Status</label>
        <select class="form-control" [(ngModel)]="filterCriteria.status" (change)="generateReport()">
          <option value="">Select Status</option>
          <option *ngFor="let status of statuses" [value]="status">{{ status }}</option>
        </select>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="filter-actions">
      <button class="btn btn-generate" (click)="generateReport()">Generate Report</button>
      <button class="btn btn-reset" (click)="resetFilters()">Reset Filters</button>
    </div>
  </div>

  <!-- Summary Statistics Section -->
  <div class="summary-section" *ngIf="reportSummary.totalTransactions > 0">
    <h3 class="section-title">Summary Statistics</h3>
    
    <div class="stats-grid">
      <div class="stat-card stat-total">
        <div class="stat-emoji">ğŸ“Š</div>
        <div class="stat-label">Total Transactions</div>
        <div class="stat-value">{{ reportSummary.totalTransactions }}</div>
      </div>

      <div class="stat-card stat-amount">
        <div class="stat-emoji">ğŸ’°</div>
        <div class="stat-label">Total Amount</div>
        <div class="stat-value">{{ formatCurrency(reportSummary.totalAmount) }}</div>
      </div>

      <div class="stat-card stat-average">
        <div class="stat-emoji">ğŸ“ˆ</div>
        <div class="stat-label">Average Amount</div>
        <div class="stat-value">{{ formatCurrency(reportSummary.averageAmount) }}</div>
      </div>

      <div class="stat-card stat-completed">
        <div class="stat-emoji">âœ…</div>
        <div class="stat-label">Completed</div>
        <div class="stat-value">{{ reportSummary.completedCount }}</div>
      </div>

      <div class="stat-card stat-pending">
        <div class="stat-emoji">â³</div>
        <div class="stat-label">Pending</div>
        <div class="stat-value">{{ reportSummary.pendingCount }}</div>
      </div>

      <div class="stat-card stat-deposit">
        <div class="stat-emoji">ğŸ“¥</div>
        <div class="stat-label">Deposits</div>
        <div class="stat-value">{{ reportSummary.depositCount }}</div>
      </div>

      <div class="stat-card stat-withdrawal">
        <div class="stat-emoji">ğŸ“¤</div>
        <div class="stat-label">Withdrawals</div>
        <div class="stat-value">{{ reportSummary.withdrawalCount }}</div>
      </div>

      <div class="stat-card stat-transfer">
        <div class="stat-emoji">ğŸ”„</div>
        <div class="stat-label">Transfers</div>
        <div class="stat-value">{{ reportSummary.transferCount }}</div>
      </div>
    </div>
  </div>

  <!-- Download Section -->
  <div class="download-section">
    <h3 class="section-title">Export Report</h3>
    <div class="download-buttons">
      <button class="btn btn-pdf" (click)="downloadPDF()">ğŸ“„ Download as PDF</button>
      <button class="btn btn-csv" (click)="downloadAsCSV()">ğŸ“Š Download as CSV</button>
    </div>
  </div>

  <!-- Transaction Table Section -->
  <div class="table-section" *ngIf="filteredTransactions.length > 0">
    <h3 class="section-title">Transaction Details</h3>
    
    <div class="table-wrapper">
      <table class="table table-hover">
        <thead>
          <tr>
            <th>ID</th>
            <th>Account ID</th>
            <th>Customer Name</th>
            <th>Type</th>
            <th>Amount</th>
            <th>Branch</th>
            <th>Date</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let transaction of paginatedTransactions" [ngClass]="'row-' + transaction.status.toLowerCase()">
            <td>{{ transaction.id }}</td>
            <td>{{ transaction.accountId }}</td>
            <td>{{ transaction.customerName }}</td>
            <td>{{ transaction.type }}</td>
            <td class="amount-cell">{{ formatCurrency(transaction.amount) }}</td>
            <td>{{ transaction.branch }}</td>
            <td>{{ formatDate(transaction.date) }}</td>
            <td>
              <span class="status-badge" [ngClass]="'status-' + transaction.status.toLowerCase()">
                {{ transaction.status }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="pagination-section">
      <button class="pagination-btn" (click)="onPageChange(currentPage - 1)" [disabled]="currentPage === 1">
        â† Previous
      </button>
      
      <div class="pagination-numbers">
        <button *ngFor="let page of getPageNumbers()" 
                class="pagination-number" 
                [class.active]="page === currentPage"
                (click)="onPageChange(page)">
          {{ page }}
        </button>
      </div>
      
      <button class="pagination-btn" (click)="onPageChange(currentPage + 1)" [disabled]="currentPage === totalPages">
        Next â†’
      </button>
      
      <span class="pagination-info">Page {{ currentPage }} of {{ totalPages }}</span>
    </div>
  </div>

  <!-- No Data Message -->
  <div *ngIf="filteredTransactions.length === 0 && !isLoading" class="no-data">
    <p>No transactions found. Please adjust your filters and try again.</p>
  </div>

  <!-- Loading Indicator -->
  <div *ngIf="isLoading" class="loading">
    <div class="spinner"></div>
    <p>Loading transactions...</p>
  </div>
</div>
